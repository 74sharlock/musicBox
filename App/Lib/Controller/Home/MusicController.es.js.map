{"version":3,"sources":["MusicController.es.es6"],"names":[],"mappings":";;;;;;;;oBAAiB,MAAM;;;;AAEvB,IAAI,OAAO,GAAG;AACV,cAAU,EAAA,oBAAC,MAAM,EAAC;AACd,YAAI,IAAI,GAAG,IAAI;YACX,OAAO,GAAG,EAAE,CAAC;AACjB,cAAM,GAAG,kBAAkB,CAAC,MAAM,CAAC,CAAC;;AAEpC,YAAI,OAAO,GAAG;AACV,6BAAiB,EAAE,qBAAqB;AACxC,6BAAiB,EAAE,yBAAyB;AAC5C,2BAAe,EAAE,UAAU;AAC3B,wBAAY,EAAE,YAAY;AAC1B,kBAAM,EAAE,mBAAmB;AAC3B,oBAAQ,EAAE,UAAU;AACpB,mBAAO,EAAE,UAAU;AACnB,qBAAS,EAAE,2BAA2B;AACtC,wBAAY,EAAE,+GAA+G;SAChI,CAAC;;AAEF,YAAI,MAAM,GAAG;AACT,oBAAQ,EAAE,mBAAmB;AAC7B,gBAAI,EAAE,EAAE;AACR,gBAAI,EAAE,MAAM,CAAC,OAAO,CAAC,2BAA2B,EAAE,EAAE,CAAC;AACrD,kBAAM,EAAE,KAAK;AACb,mBAAO,EAAP,OAAO;SACV,CAAC;;AAEF,YAAI,GAAG,GAAG,kBAAK,OAAO,CAAC,MAAM,EAAE,UAAC,GAAG,EAAK;AACpC,eAAG,CAAC,EAAE,CAAC,MAAM,EAAE,UAAU,KAAK,EAAE;AAC5B,uBAAO,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAC9B,CAAC,CAAC;AACH,eAAG,CAAC,EAAE,CAAC,KAAK,EAAE,YAAY;AACtB,oBAAI,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AAC3B,oBAAI,CAAC,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,YAAY,CAAC,CAAC;AAClD,uBAAO,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AACjC,uBAAO,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;aAC5B,CAAC,CAAC;SACN,CAAC,CAAC;;AAEH,WAAG,CAAC,GAAG,EAAE,CAAC;KACb;CACJ,CAAC;;qBAEa,UAAU,CAAC,qBAAqB,EAAE;WAAM,OAAO;CAAA,CAAC","file":"MusicController.es.js","sourcesContent":["import http from 'http'\r\n\r\nlet Actions = {\r\n    songAction(source){\r\n        let that = this,\r\n            buffers = [];\r\n        source = decodeURIComponent(source);\r\n\r\n        let headers = {\r\n            'Accept-Encoding': 'identity;q=1, *;q=0',\r\n            'Accept-Language': 'zh-CN,zh;q=0.8,en;q=0.6',\r\n            'Cache-Control': 'no-cache',\r\n            'Connection': 'keep-alive',\r\n            'Host': 'file.qianqian.com',\r\n            'Pragma': 'no-cache',\r\n            'Range': 'bytes=0-',\r\n            'Referer': 'http://file.qianqian.com/',\r\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.85 Safari/537.36'\r\n        };\r\n\r\n        let config = {\r\n            hostname: 'file.qianqian.com',\r\n            port: 80,\r\n            path: source.replace('http://file.qianqian.com/', ''),\r\n            method: 'GET',\r\n            headers\r\n        };\r\n\r\n        let req = http.request(config, (res) => {\r\n            res.on('data', function (chuck) {\r\n                return buffers.push(chuck);\r\n            });\r\n            res.on('end', function () {\r\n                that.http.cthIsSend = true;\r\n                that.http.setHeader('Content-Type', 'audio/mpeg');\r\n                buffers = Buffer.concat(buffers);\r\n                return that.end(buffers);\r\n            });\r\n        });\r\n\r\n        req.end();\r\n    }\r\n};\r\n\r\nexport default Controller('Home/BaseController', () => Actions)"]}